start: PRECHECK
accept: AC
reject: RE
blank: *

PRECHECK 0 -> AC 0 ^
PRECHECK 1 -> HEAD 1 ^
PRECHECK 2 -> HEAD 2 ^

HEAD 0 -> WARMUP5 0 <
HEAD 1 -> WARMUP5 1 <
HEAD 2 -> WARMUP5 2 <

WARMUP5 * -> WARMUP4 * <
WARMUP4 * -> WARMUP3 * <
WARMUP3 * -> WARMUP2 * <
WARMUP2 * -> WARMUP1 * <
WARMUP1 * -> START 0 >

START * -> START * >
START 0 -> TO_END 0 ^
START 1 -> TO_END 1 ^
START 2 -> TO_END 2 ^
START $ -> TO_SHUTDOWN * <

TO_SHUTDOWN * -> TO_SHUTDOWN * <
TO_SHUTDOWN 0 -> SHUTDOWN 0 <
TO_SHUTDOWN 1 -> SHUTDOWN 1 <

SHUTDOWN 0 -> SHUTDOWN 0 <
SHUTDOWN 1 -> SHUTDOWN 1 <
SHUTDOWN * -> AC * >

TO_END 0 -> TO_END 0 >
TO_END 1 -> TO_END 1 >
TO_END 2 -> TO_END 2 >
TO_END * -> DECR * <

DECR 0 -> DECR 2 <
DECR 1 -> TO_HEAD 0 <
DECR 2 -> TO_HEAD 1 <

TO_HEAD 0 -> TO_HEAD 0 <
TO_HEAD 1 -> TO_HEAD 1 <
TO_HEAD 2 -> TO_HEAD 2 <
TO_HEAD * -> TRIM * >

TRIM 0 -> TRIM * >
TRIM 1 -> TO_INCR 1 <
TRIM 2 -> TO_INCR 2 <
TRIM * -> TO_INCR $ <

TO_INCR * -> TO_INCR * <
TO_INCR 0 -> INCR 0 ^
TO_INCR 1 -> INCR 1 ^

INCR 0 -> TO_START 1 >
INCR 1 -> INCR 0 <
INCR * -> TO_START 1 >

TO_START 0 -> TO_START 0 >
TO_START 1 -> TO_START 1 >
TO_START * -> START * >
